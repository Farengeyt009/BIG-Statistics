# üìö –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±—â–∏–π –æ–±–∑–æ—Ä](#–æ–±—â–∏–π-–æ–±–∑–æ—Ä)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
3. [Backend API](#backend-api)
4. [Frontend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è](#frontend-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
5. [–õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤](#–ª–æ–≥–∏–∫–∞-–ø—Ä–æ–≤–µ—Ä–∫–∏-–ø—Ä–∞–≤)
6. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
7. [–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã](#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-—Å–∏—Å—Ç–µ–º—ã)
8. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–¥–ª—è-–±—É–¥—É—â–µ–≥–æ-—Ä–∞–∑–≤–∏—Ç–∏—è)

---

## üéØ –û–±—â–∏–π –æ–±–∑–æ—Ä

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ **–ø—Ä–∏–Ω—Ü–∏–ø–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π** —Å —è–≤–Ω—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º –¥–æ—Å—Ç—É–ø–∞:

- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**: –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –≤—Å–µ –æ–±—ã—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –Ω–æ **–ù–ï –º–æ–≥—É—Ç** —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
- **–°–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**: –¢—Ä–µ–±—É—é—Ç —è–≤–Ω–æ–≥–æ –ø—Ä–∞–≤–∞ `CanView = 1`
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¢—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –ø—Ä–∞–≤–∞ `CanEdit = 1`
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**: –ò–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É (`IsAdmin = 1`)

### –¢–∏–ø—ã –ø—Ä–∞–≤

| –¢–∏–ø –ø—Ä–∞–≤–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-----------|-----------|--------|
| `CanView` | –ü—Ä–∞–≤–æ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–∫—Ä—ã—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã | –î–æ—Å—Ç—É–ø –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ KPI |
| `CanEdit` | –ü—Ä–∞–≤–æ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä—å –≤—Ä–µ–º–µ–Ω–∏ –≤ Production |
| `IsAdmin` | –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É (–≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–∞–≤–æ) | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |

---

## üóÑÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°—Ö–µ–º–∞ `Users`

```
Users (—Å—Ö–µ–º–∞)
‚îú‚îÄ‚îÄ Users                    (–¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚îú‚îÄ‚îÄ Pages                    (–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç—Ä–∞–Ω–∏—Ü, —Ç—Ä–µ–±—É—é—â–∏—Ö –ø—Ä–∞–≤–∞)
‚îú‚îÄ‚îÄ UserPagePermissions      (–ü—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
‚îú‚îÄ‚îÄ UserReports              (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û ‚úÖ)
‚îî‚îÄ‚îÄ AuditLog                 (–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π - –†–ï–ê–õ–ò–ó–û–í–ê–ù–û ‚úÖ)
```

### –¢–∞–±–ª–∏—Ü–∞ `Users.Users`

–û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```sql
CREATE TABLE Users.Users (
    UserID INT IDENTITY(1,1) PRIMARY KEY,
    Username NVARCHAR(50) UNIQUE NOT NULL,
    Password NVARCHAR(100) NOT NULL,        -- –ü–∞—Ä–æ–ª—å –ë–ï–ó —Ö–µ—à–∞
    FullName NVARCHAR(100),
    Email NVARCHAR(100),
    empcode NVARCHAR(50),                   -- –ö–æ–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ –°–ö–£–î (–ù–û–í–û–ï ‚úÖ)
    IsAdmin BIT DEFAULT 0,                  -- –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø—Ä–∞–≤–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    IsActive BIT DEFAULT 1,                 -- –ê–∫—Ç–∏–≤–µ–Ω/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
    CreatedAt DATETIME DEFAULT GETDATE(),
    LastLogin DATETIME NULL
);

-- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ empcode
CREATE INDEX IX_Users_empcode ON Users.Users(empcode);
```

**–ü–æ–ª—è:**
- `Username` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode/‰∏≠Êñá)
- `empcode` - –∫–æ–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –°–ö–£–î (–¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
- `IsAdmin` - –µ—Å–ª–∏ `1`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç **–í–°–ï** –ø—Ä–∞–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- `IsActive` - –µ—Å–ª–∏ `0`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

---

### –¢–∞–±–ª–∏—Ü–∞ `Import_SKUD.empinfo`

–¢–∞–±–ª–∏—Ü–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –°–ö–£–î —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).

```sql
-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã –°–ö–£–î
Import_SKUD.empinfo
‚îú‚îÄ‚îÄ empcode       NVARCHAR(50)   -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ empname       NVARCHAR(100)  -- –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ birthday      DATE            -- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
‚îú‚îÄ‚îÄ age           INT             -- –í–æ–∑—Ä–∞—Å—Ç
‚îú‚îÄ‚îÄ entrydate     DATE            -- –î–∞—Ç–∞ –ø—Ä–∏–µ–º–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É
‚îú‚îÄ‚îÄ emptype       NVARCHAR(50)   -- –¢–∏–ø —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
‚îú‚îÄ‚îÄ isactive      BIT             -- –ê–∫—Ç–∏–≤–µ–Ω/—É–≤–æ–ª–µ–Ω
‚îú‚îÄ‚îÄ deptname2     NVARCHAR(100)  -- –û—Ç–¥–µ–ª —É—Ä–æ–≤–µ–Ω—å 2
‚îú‚îÄ‚îÄ deptname3     NVARCHAR(100)  -- –û—Ç–¥–µ–ª —É—Ä–æ–≤–µ–Ω—å 3
‚îú‚îÄ‚îÄ deptname4     NVARCHAR(100)  -- –û—Ç–¥–µ–ª —É—Ä–æ–≤–µ–Ω—å 4
‚îú‚îÄ‚îÄ deptname5     NVARCHAR(100)  -- –û—Ç–¥–µ–ª —É—Ä–æ–≤–µ–Ω—å 5
‚îî‚îÄ‚îÄ LastUpdated   DATETIME        -- –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:**
```sql
SELECT empcode, empname, isactive FROM Import_SKUD.empinfo WHERE isactive = 1;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç:
empcode | empname         | isactive
--------|-----------------|----------
01      | PERMINOV OLEG   | 1
3609    | KAGIROV UMAR    | 1
1234    | ÊùéÊòé            | 1
5678    | Áéã‰ºü            | 1
```

---

### –¢–∞–±–ª–∏—Ü–∞ `Users.Pages`

–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç—Ä–∞–Ω–∏—Ü, **—Ç—Ä–µ–±—É—é—â–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤**.

> ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –í —ç—Ç—É —Ç–∞–±–ª–∏—Ü—É –≤–Ω–æ—Å—è—Ç—Å—è **–¢–û–õ–¨–ö–û** —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤. –û–±—ã—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (home, plan, tv –∏ —Ç.–¥.) **–ù–ï –≤–Ω–æ—Å—è—Ç—Å—è**.

```sql
CREATE TABLE Users.Pages (
    PageID INT IDENTITY(1,1) PRIMARY KEY,
    PageKey NVARCHAR(50) UNIQUE NOT NULL,       -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    PageName NVARCHAR(100) NOT NULL,
    Description NVARCHAR(500),
    RequiresViewPermission BIT DEFAULT 0,       -- 1 = —Å–∫—Ä—ã—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    RequiresEditPermission BIT DEFAULT 0,       -- 1 = –µ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ
    DisplayOrder INT DEFAULT 0
);
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:**

```sql
-- –°–∫—Ä—ã—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–æ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä)
INSERT INTO Users.Pages (PageKey, PageName, RequiresViewPermission, RequiresEditPermission) 
VALUES ('kpi', N'KPI', 1, 0);

-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø—Ä–∞–≤–æ–º –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–†–ï–ê–õ–ò–ó–û–í–ê–ù–û)
INSERT INTO Users.Pages (PageKey, PageName, RequiresViewPermission, RequiresEditPermission) 
VALUES ('orders_orderlog_edit', N'Orders - Order Log (Edit Standard Reports)', 0, 1);
```

**–õ–æ–≥–∏–∫–∞ –ø–æ–ª–µ–π:**
- `RequiresViewPermission = 1` ‚Üí –°—Ç—Ä–∞–Ω–∏—Ü–∞ **—Å–∫—Ä—ã—Ç–∞—è**, –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–æ `CanView = 1` —á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å
- `RequiresEditPermission = 1` ‚Üí –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–æ `CanEdit = 1`

---

### –¢–∞–±–ª–∏—Ü–∞ `Users.UserPagePermissions`

–ü—Ä–∞–≤–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

```sql
CREATE TABLE Users.UserPagePermissions (
    PermissionID INT IDENTITY(1,1) PRIMARY KEY,
    UserID INT NOT NULL,
    PageKey NVARCHAR(50) NOT NULL,
    CanView BIT DEFAULT 0,                      -- 1 = –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Å–∫—Ä—ã—Ç—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    CanEdit BIT DEFAULT 0,                      -- 1 = –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
    FOREIGN KEY (UserID) REFERENCES Users.Users(UserID) ON DELETE CASCADE,
    FOREIGN KEY (PageKey) REFERENCES Users.Pages(PageKey),
    UNIQUE (UserID, PageKey)
);
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:**

```sql
-- GM –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å KPI
INSERT INTO Users.UserPagePermissions (UserID, PageKey, CanView, CanEdit) 
VALUES (2, 'kpi', 1, 0);

-- Umar –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å KPI
INSERT INTO Users.UserPagePermissions (UserID, PageKey, CanView, CanEdit) 
VALUES (3, 'kpi', 1, 0);

-- –í –±—É–¥—É—â–µ–º: GM –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å Production
-- INSERT INTO Users.UserPagePermissions (UserID, PageKey, CanView, CanEdit) 
-- VALUES (2, 'production', 0, 1);
```

---

### –¢–∞–±–ª–∏—Ü–∞ `Users.AuditLog`

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```sql
CREATE TABLE Users.AuditLog (
    LogID INT IDENTITY(1,1) PRIMARY KEY,
    UserID INT NOT NULL,
    ActionType NVARCHAR(50) NOT NULL,  -- 'login', 'logout', 'session_start', 'page_view', 'data_edit'
    PageKey NVARCHAR(100),             -- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –¥–µ–π—Å—Ç–≤–∏–µ
    ActionDetails NVARCHAR(MAX),       -- JSON —Å –¥–µ—Ç–∞–ª—è–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    IPAddress NVARCHAR(50),            -- IP –∞–¥—Ä–µ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    UserAgent NVARCHAR(500),           -- –ë—Ä–∞—É–∑–µ—Ä –∏ –û–°
    CreatedAt DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (UserID) REFERENCES Users.Users(UserID) ON DELETE CASCADE
);
```

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø–∏—Å–µ–π:**

```sql
-- –í—Ö–æ–¥ —Å –ø–∞—Ä–æ–ª–µ–º
INSERT INTO Users.AuditLog (UserID, ActionType, IPAddress)
VALUES (2, 'login', '192.168.1.100');

-- –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º
INSERT INTO Users.AuditLog (UserID, ActionType, IPAddress)
VALUES (2, 'session_start', '192.168.1.100');

-- –ü–æ—Å–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
INSERT INTO Users.AuditLog (UserID, ActionType, PageKey, IPAddress)
VALUES (2, 'page_view', 'production', '192.168.1.100');

-- –í—ã—Ö–æ–¥
INSERT INTO Users.AuditLog (UserID, ActionType, IPAddress)
VALUES (2, 'logout', '192.168.1.100');
```

**–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `session_start` - –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å—å < 30 —Å–µ–∫—É–Ω–¥
- `page_view` - –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –µ—Å–ª–∏ –ø–æ—Å–µ—â–µ–Ω–∏–µ –≠–¢–û–ô –ñ–ï —Å—Ç—Ä–∞–Ω–∏—Ü—ã < 30 —Å–µ–∫—É–Ω–¥

---

## üîß Backend API

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
Back/Users/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ auth_api.py          # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ users_api.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º
‚îÇ   ‚îî‚îÄ‚îÄ admin_api.py         # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.py      # –õ–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
‚îÇ   ‚îú‚îÄ‚îÄ users_service.py     # –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ avatar_service.py    # –†–∞–±–æ—Ç–∞ —Å –∞–≤–∞—Ç–∞—Ä–∫–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ audit_service.py     # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–ù–û–í–û–ï ‚úÖ)
‚îî‚îÄ‚îÄ middleware/
    ‚îî‚îÄ‚îÄ (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)        # Middleware –¥–ª—è –∑–∞—â–∏—Ç—ã API
```

---

### API Endpoints

#### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**POST `/api/auth/login`**

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```python
# Request
{
    "username": "GM",
    "password": "123"
}

# Response
{
    "success": true,
    "token": "eyJhbGciOiJIUzI1NiIs...",  # JWT —Ç–æ–∫–µ–Ω
    "user": {
        "user_id": 2,
        "username": "GM",
        "full_name": "GM User",
        "email": null,
        "is_admin": false
    },
    "permissions": [
        {
            "page_key": "kpi",
            "can_view": true,
            "can_edit": false
        }
    ]
}
```

---

**GET `/api/auth/me`**

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞).

```python
# Headers
Authorization: Bearer <token>

# Response
{
    "success": true,
    "user": {
        "user_id": 2,
        "username": "GM",
        "is_admin": false
    },
    "permissions": [...]
}
```

---

**POST `/api/auth/check-permission`**

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

```python
# Headers
Authorization: Bearer <token>

# Request
{
    "page_key": "kpi",
    "permission_type": "view"  # –∏–ª–∏ "edit"
}

# Response
{
    "success": true,
    "has_permission": true
}
```

---

#### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º

**GET `/api/users/profile`**

–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è.

**PUT `/api/users/profile`**

–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (–∏–º—è, –ø–∞—Ä–æ–ª—å).

```python
# Request
{
    "full_name": "–ù–æ–≤–æ–µ –ò–º—è",  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    "password": "–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å"  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

---

### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ (Backend)

–§–∞–π–ª: `Back/Users/service/auth_service.py`

```python
def check_page_permission(user_id: int, page_key: str, permission_type: str = 'view') -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É.
    
    –õ–æ–≥–∏–∫–∞:
    1. –ï—Å–ª–∏ IsAdmin = 1 ‚Üí return True (–∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤—Å—ë)
    2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ Users.Pages
       - –ù–ï–¢ ‚Üí return True (–æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö)
       - –î–ê ‚Üí —Å–º–æ—Ç—Ä–∏–º –¥–∞–ª—å—à–µ
    3. –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∞ (RequiresViewPermission = 1 –∏–ª–∏ RequiresEditPermission = 1):
       - –ò—â–µ–º –∑–∞–ø–∏—Å—å –≤ Users.UserPagePermissions
       - –ù–ï–¢ –∑–∞–ø–∏—Å–∏ ‚Üí return False (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞)
       - –ï–°–¢–¨ –∑–∞–ø–∏—Å—å ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º CanView/CanEdit
    """
    # ... –∫–æ–¥ —Å–º. –≤ —Ñ–∞–π–ª–µ
```

**–ü—Ä–∏–º–µ—Ä SQL –∑–∞–ø—Ä–æ—Å–∞:**

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞: —ç—Ç–æ –∞–¥–º–∏–Ω?
SELECT IsAdmin FROM Users.Users WHERE UserID = ?

-- –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –µ—Å—Ç—å –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ?
SELECT RequiresViewPermission, RequiresEditPermission
FROM Users.Pages
WHERE PageKey = ?

-- –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º:
SELECT CanView, CanEdit
FROM Users.UserPagePermissions
WHERE UserID = ? AND PageKey = ?
```

---

## ‚öõÔ∏è Frontend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
Front/src/
‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ RequirePermission.tsx        # HOC –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ requirePermissionTranslation.json
‚îî‚îÄ‚îÄ pages/
    ‚îî‚îÄ‚îÄ UserPage/
        ‚îî‚îÄ‚îÄ UserPage.tsx             # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è
```

---

### AuthContext

–§–∞–π–ª: `Front/src/context/AuthContext.tsx`

**–ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç:**
- `user` - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user_id, username, full_name, is_admin)
- `permissions` - –º–∞—Å—Å–∏–≤ –ø—Ä–∞–≤ `[{page_key, can_view, can_edit}, ...]`
- `token` - JWT —Ç–æ–∫–µ–Ω
- `isLoading` - —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- `isAuthenticated` - –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

**–ú–µ—Ç–æ–¥—ã:**
- `login(username, password)` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `logout()` - –≤—ã—Ö–æ–¥
- `hasPermission(pageKey, permissionType)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∞

---

### –§—É–Ω–∫—Ü–∏—è `hasPermission()`

–§–∞–π–ª: `Front/src/context/AuthContext.tsx`

```typescript
const hasPermission = (pageKey: string, permissionType: 'view' | 'edit' = 'view'): boolean => {
  // 1. –ê–¥–º–∏–Ω ‚Üí –≤—Å—ë —Ä–∞–∑—Ä–µ—à–µ–Ω–æ
  if (user?.is_admin) {
    return true;
  }

  // 2. –°–ø–∏—Å–æ–∫ —Å–∫—Ä—ã—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (—Ç—Ä–µ–±—É—é—â–∏—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤)
  const restrictedPages = ['kpi'];  // ‚ö†Ô∏è –û–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Å–∫—Ä—ã—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

  // 3. –ò—â–µ–º –ø—Ä–∞–≤–æ –¥–ª—è –¥–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  const permission = permissions.find(p => p.page_key === pageKey);

  // 4. –ï—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ —Å–ø–∏—Å–∫–µ —Å–∫—Ä—ã—Ç—ã—Ö
  if (restrictedPages.includes(pageKey)) {
    if (!permission) return false;  // –ù–µ—Ç –∑–∞–ø–∏—Å–∏ = –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞
    return permissionType === 'view' ? permission.can_view : permission.can_edit;
  }

  // 5. –î–ª—è –æ–±—ã—á–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
  if (!permission) return true;  // –ù–µ—Ç –∑–∞–ø–∏—Å–∏ = –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω
  return permissionType === 'view' ? permission.can_view : permission.can_edit;
};
```

> ‚ö†Ô∏è **–í–ê–ñ–ù–û**: –°–ø–∏—Å–æ–∫ `restrictedPages` –¥–æ–ª–∂–µ–Ω **—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è** —Å —Ç–∞–±–ª–∏—Ü–µ–π `Users.Pages` (—Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–¥–µ `RequiresViewPermission = 1`).

---

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `RequirePermission`

–§–∞–π–ª: `Front/src/components/RequirePermission.tsx`

HOC (Higher-Order Component) –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ App.tsx:**

```tsx
<Route 
  path="/kpi" 
  element={
    <RequireAuth>
      <RequirePermission pageKey="kpi" permissionType="view">
        <KPI />
      </RequirePermission>
    </RequireAuth>
  } 
/>
```

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∫–∞ `isLoading = true`
2. –ï—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `hasPermission(pageKey, permissionType)`
   - `false` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É "403 –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω"
   - `true` ‚Üí —Ä–µ–Ω–¥–µ—Ä–∏—Ç `children` (—Å–∞–º—É —Å—Ç—Ä–∞–Ω–∏—Ü—É)

---

### Sidebar - —Å–∫—Ä—ã—Ç–∏–µ –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é

–§–∞–π–ª: `Front/src/components/Sidebar/Sidebar.tsx`

–ü—É–Ω–∫—Ç—ã –º–µ–Ω—é —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤:

```tsx
{/* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º KPI —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø—Ä–∞–≤–æ */}
{user?.is_admin || permissions.some(p => p.page_key === 'kpi' && p.can_view) ? (
  <Link to="/kpi" className="block">
    <SidebarIcon icon={<LineChart />} label={t('kpi')} ... />
  </Link>
) : null}
```

---

## üîç –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ (–ü–æ—à–∞–≥–æ–≤–æ)

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Aikerim –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/kpi`

**–î–∞–Ω–æ:**
- UserID: 4
- IsAdmin: 0 (–æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- –ù–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ `Users.UserPagePermissions` –¥–ª—è `kpi`

**Backend (–ø—Ä–∏ –ª–æ–≥–∏–Ω–µ):**
1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å ‚úÖ
2. –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∞–≤–∞ –∏–∑ `Users.UserPagePermissions` ‚Üí –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ `[]`
3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–∫–µ–Ω + –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ permissions

**Frontend (–ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `/kpi`):**
1. `RequirePermission` –≤—ã–∑—ã–≤–∞–µ—Ç `hasPermission('kpi', 'view')`
2. `is_admin = false` ‚Üí –∏–¥–µ–º –¥–∞–ª—å—à–µ
3. `'kpi'` –≤ —Å–ø–∏—Å–∫–µ `restrictedPages` ‚Üí —ç—Ç–æ —Å–∫—Ä—ã—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
4. –ò—â–µ–º `permission` —Å `page_key = 'kpi'` ‚Üí **–ù–ï–¢**
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç: `return false`** ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ–º "403 –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω"

**Sidebar:**
- –£—Å–ª–æ–≤–∏–µ: `user?.is_admin || permissions.some(p => p.page_key === 'kpi' && p.can_view)`
- `false || false` ‚Üí **–ü—É–Ω–∫—Ç –º–µ–Ω—é KPI —Å–∫—Ä—ã—Ç**

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å GM –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/kpi`

**–î–∞–Ω–æ:**
- UserID: 2
- IsAdmin: 0
- **–ï—Å—Ç—å –∑–∞–ø–∏—Å—å**: `(UserID=2, PageKey='kpi', CanView=1, CanEdit=0)`

**Backend (–ø—Ä–∏ –ª–æ–≥–∏–Ω–µ):**
1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å ‚úÖ
2. –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∞–≤–∞ ‚Üí `[{page_key: 'kpi', can_view: true, can_edit: false}]`
3. –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–∫–µ–Ω + –º–∞—Å—Å–∏–≤ permissions

**Frontend (–ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `/kpi`):**
1. `hasPermission('kpi', 'view')`
2. `is_admin = false` ‚Üí –∏–¥–µ–º –¥–∞–ª—å—à–µ
3. `'kpi'` –≤ —Å–ø–∏—Å–∫–µ `restrictedPages` ‚Üí —Å–∫—Ä—ã—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
4. –ò—â–µ–º `permission` ‚Üí **–ï–°–¢–¨**: `{page_key: 'kpi', can_view: true}`
5. **–†–µ–∑—É–ª—å—Ç–∞—Ç: `return true`** ‚Üí –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É KPI

**Sidebar:**
- –£—Å–ª–æ–≤–∏–µ: `permissions.some(p => p.page_key === 'kpi' && p.can_view)`
- `true` ‚Üí **–ü—É–Ω–∫—Ç –º–µ–Ω—é KPI –≤–∏–¥–µ–Ω**

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/kpi`

**–î–∞–Ω–æ:**
- UserID: 1
- **IsAdmin: 1**
- –ù–µ—Ç –∑–∞–ø–∏—Å–∏ –≤ `Users.UserPagePermissions`

**Frontend (–ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `/kpi`):**
1. `hasPermission('kpi', 'view')`
2. `user?.is_admin = true` ‚Üí **–°–†–ê–ó–£ return true**
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É KPI

**Sidebar:**
- –£—Å–ª–æ–≤–∏–µ: `user?.is_admin || ...`
- `true` ‚Üí **–ü—É–Ω–∫—Ç –º–µ–Ω—é KPI –≤–∏–¥–µ–Ω**

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å–∫—Ä—ã—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ó–∞–¥–∞—á–∞:** –°–¥–µ–ª–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É "–§–∏–Ω–∞–Ω—Å—ã" —Å–∫—Ä—ã—Ç–æ–π (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–æ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä).

#### 1. Backend (SQL)

```sql
-- –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
INSERT INTO Users.Pages (PageKey, PageName, RequiresViewPermission, RequiresEditPermission, DisplayOrder)
VALUES ('finance', N'–§–∏–Ω–∞–Ω—Å—ã', 1, 0, 7);

-- –î–∞–µ–º –ø—Ä–∞–≤–æ GM –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä
INSERT INTO Users.UserPagePermissions (UserID, PageKey, CanView, CanEdit)
VALUES (2, 'finance', 1, 0);
```

#### 2. Frontend (AuthContext.tsx)

```tsx
// –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Å–∫—Ä—ã—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
const restrictedPages = ['kpi', 'finance'];  // ‚Üê –¥–æ–±–∞–≤–∏–ª–∏ 'finance'
```

#### 3. Frontend (App.tsx)

```tsx
<Route 
  path="/finance" 
  element={
    <RequireAuth>
      <RequirePermission pageKey="finance" permissionType="view">
        <FinancePage />
      </RequirePermission>
    </RequireAuth>
  } 
/>
```

#### 4. Frontend (Sidebar.tsx)

```tsx
{user?.is_admin || permissions.some(p => p.page_key === 'finance' && p.can_view) ? (
  <Link to="/finance" className="block">
    <SidebarIcon icon={<DollarSign />} label={t('finance')} ... />
  </Link>
) : null}
```

---

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞–¥–∞—á–∞:** –î–∞—Ç—å GM –ø—Ä–∞–≤–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Production.

‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û!** Production –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—â–∏—â–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–∞–≤.

#### –†–µ–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:

**1. Backend (SQL)**

```sql
-- –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É Working Calendar –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
INSERT INTO Users.Pages (PageKey, PageName, Description, RequiresEditPermission)
VALUES ('production_working_calendar_edit', 
        N'Production - Working Calendar (Edit)',
        N'Permission to create/edit/delete working schedules',
        1);

-- –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ Time Loss (–ø–æ–ª–Ω—ã–µ)
INSERT INTO Users.Pages (PageKey, PageName, Description, RequiresEditPermission)
VALUES ('production_timeloss_edit',
        N'Production - Time Loss (Full Edit)',
        N'Full access: create, edit all fields, delete',
        1);

-- –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ Time Loss (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ)
INSERT INTO Users.Pages (PageKey, PageName, Description, RequiresEditPermission)
VALUES ('production_timeloss_limited_edit',
        N'Production - Time Loss (Limited Edit)',
        N'Limited: edit only ActionPlan, Responsible, CompletedDate',
        1);

-- –î–∞–µ–º –ø—Ä–∞–≤–æ GM –Ω–∞ –ø–æ–ª–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Time Loss
INSERT INTO Users.UserPagePermissions (UserID, PageKey, CanView, CanEdit)
VALUES (2, 'production_timeloss_edit', 0, 1);
```

**2. Frontend (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Production)**

```tsx
// TimeLoss.tsx
import { useAuth } from '../../../../context/AuthContext';

const TimeLoss: React.FC = () => {
  const { hasPermission } = useAuth();
  
  const canEditFull = hasPermission('production_timeloss_edit', 'edit');
  const canEditLimited = hasPermission('production_timeloss_limited_edit', 'edit');
  
  return (
    <Table 
      canEditFull={canEditFull}
      canEditLimited={canEditLimited}
    />
  );
};

// TimeLossTable.tsx
const columns = [
  { 
    field: 'OnlyDate', 
    editable: (p) => canEditFull && editMode  // –¢–æ–ª—å–∫–æ Full Edit
  },
  { 
    field: 'ActionPlan', 
    editable: (p) => (canEditFull || canEditLimited) && editMode  // Full –∏–ª–∏ Limited
  },
  // ...
];

// –ö–Ω–æ–ø–∫–∏
{canEditFull && <button onClick={addRow}>Add Row</button>}
{(canEditFull || canEditLimited) && <EditModeToggle />}
{canEditFull && <button onClick={deleteMode}>Delete</button>}
```

**3. –†–µ–∑—É–ª—å—Ç–∞—Ç:**

–¢–µ–ø–µ—Ä—å –µ—Å—Ç—å **3 —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞** –∫ Time Loss:
- **Viewer** - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä
- **Limited Editor** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ 3 –ø–æ–ª–µ–π (ActionPlan, Responsible, CompletedDate)
- **Full Editor** - –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π, —É–¥–∞–ª–µ–Ω–∏–µ)

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –¢–µ–∫—É—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç:** –°–∫—Ä—ã—Ç–∏–µ —Ü–µ–ª—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
2. ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
3. ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç:** –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –ø—Ä–∞–≤–∞ (Viewer, Limited, Full –¥–ª—è Time Loss)
4. ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç:** –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
6. ‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –ß–∞—Å—Ç–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –æ—Ç–¥–µ–ª)
7. ‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏)
8. ‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –ó–∞—â–∏—Ç–∞ Backend API endpoints —á–µ—Ä–µ–∑ middleware

---

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ß–∞—Å—Ç–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º

**–ü—Ä–∏–º–µ—Ä:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É Production, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–µ–≥–æ —Ü–µ—Ö–∞.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**

##### –ü–æ–¥—Ö–æ–¥ A: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API

**Backend:**

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤ UserPagePermissions
ALTER TABLE Users.UserPagePermissions
ADD FilterCriteria NVARCHAR(MAX);  -- JSON —Å –∫—Ä–∏—Ç–µ—Ä–∏—è–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

-- –ü—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏
UPDATE Users.UserPagePermissions
SET FilterCriteria = '{"WorkShopName_CH": ["Ë£ÖÈÖçËΩ¶Èó¥"]}'
WHERE UserID = 4 AND PageKey = 'production';
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API:**

```python
def get_production_data(user_id, filters=None):
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—Ä–∏—Ç–µ—Ä–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_filters = get_user_filter_criteria(user_id, 'production')
    
    sql = "SELECT * FROM Views_For_Plan.DailyPlan_CustomWS WHERE 1=1"
    
    # –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
    if user_filters:
        for field, values in user_filters.items():
            sql += f" AND {field} IN ({', '.join(['?'] * len(values))})"
    
    # –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–±—ã—á–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
    ...
```

---

##### –ü–æ–¥—Ö–æ–¥ B: –†–æ–ª–∏ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏

**Backend:**

```sql
-- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–æ–ª–µ–π
CREATE TABLE Users.Roles (
    RoleID INT IDENTITY(1,1) PRIMARY KEY,
    RoleName NVARCHAR(100) NOT NULL,
    Description NVARCHAR(500)
);

-- –°–≤—è–∑–∞—Ç—å —Ä–æ–ª–∏ —Å –ø—Ä–∞–≤–∞–º–∏
CREATE TABLE Users.RolePermissions (
    RoleID INT,
    PageKey NVARCHAR(50),
    CanView BIT,
    CanEdit BIT,
    FilterCriteria NVARCHAR(MAX),
    FOREIGN KEY (RoleID) REFERENCES Users.Roles(RoleID)
);

-- –ù–∞–∑–Ω–∞—á–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
CREATE TABLE Users.UserRoles (
    UserID INT,
    RoleID INT,
    FOREIGN KEY (UserID) REFERENCES Users.Users(UserID),
    FOREIGN KEY (RoleID) REFERENCES Users.Roles(RoleID)
);
```

**–ü—Ä–∏–º–µ—Ä—ã —Ä–æ–ª–µ–π:**
- "–ú–µ–Ω–µ–¥–∂–µ—Ä —Ü–µ—Ö–∞ —Å–±–æ—Ä–∫–∏" ‚Üí –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–±–æ—Ä–æ—á–Ω—ã–π —Ü–µ—Ö, –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏
- "–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞" ‚Üí –í–∏–¥–∏—Ç –≤—Å–µ —Ü–µ—Ö–∞, –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- "–ê–Ω–∞–ª–∏—Ç–∏–∫" ‚Üí –í–∏–¥–∏—Ç –≤—Å–µ, –≤–∫–ª—é—á–∞—è —Ñ–∏–Ω–∞–Ω—Å—ã, –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å

---

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω —Å–∞–º —Å–æ–∑–¥–∞–ª.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**

##### –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ CreatedBy

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏
ALTER TABLE Production.TimeLoss_Entries
ADD CreatedBy INT,
    FOREIGN KEY (CreatedBy) REFERENCES Users.Users(UserID);
```

**Backend API:**

```python
@require_permission('production', 'edit')
def update_timeloss_entry(entry_id, user_id):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º: —ç—Ç–æ –∑–∞–ø–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?
    entry = get_entry(entry_id)
    
    if not user.is_admin and entry.CreatedBy != user_id:
        raise PermissionError("–í—ã –º–æ–∂–µ—Ç–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏")
    
    # –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–ø–∏—Å—å
    ...
```

---

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ó–∞—â–∏—Ç–∞ Backend API

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** API endpoints **–ù–ï –∑–∞—â–∏—â–µ–Ω—ã** –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤.

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:**

##### –°–æ–∑–¥–∞—Ç—å middleware/–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã

–§–∞–π–ª: `Back/Users/middleware/auth_middleware.py`

```python
from functools import wraps
from flask import request, jsonify
from ..service.auth_service import verify_jwt_token, check_page_permission

def require_auth(f):
    """–¢—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è –≤–∞–ª–∏–¥–Ω–æ–≥–æ JWT —Ç–æ–∫–µ–Ω–∞"""
    @wraps(f)
    def decorated_function(*args, **kwargs):
        auth_header = request.headers.get('Authorization')
        
        if not auth_header or not auth_header.startswith('Bearer '):
            return jsonify({"error": "–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"}), 401
        
        token = auth_header.split(' ')[1]
        user_data = verify_jwt_token(token)
        
        if not user_data:
            return jsonify({"error": "–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω"}), 401
        
        # –î–æ–±–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ request
        request.user = user_data
        return f(*args, **kwargs)
    
    return decorated_function


def require_permission(page_key, permission_type='view'):
    """–¢—Ä–µ–±—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∞"""
    def decorator(f):
        @wraps(f)
        def decorated_function(*args, **kwargs):
            if not hasattr(request, 'user'):
                return jsonify({"error": "–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω"}), 401
            
            user_id = request.user['user_id']
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–æ
            has_perm = check_page_permission(user_id, page_key, permission_type)
            
            if not has_perm:
                return jsonify({"error": "–ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞"}), 403
            
            return f(*args, **kwargs)
        
        return decorated_function
    return decorator
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```python
from Back.Users.middleware.auth_middleware import require_auth, require_permission

# –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
@bp.route("/api/production/data", methods=["GET"])
@require_auth
def get_production_data():
    user = request.user
    ...

# –¢—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–æ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Production
@bp.route("/api/timeloss/entry", methods=["POST"])
@require_auth
@require_permission('production', 'edit')
def create_timeloss_entry():
    user = request.user
    ...
```

---

## üìå –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

### 1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Frontend –∏ Backend

‚ö†Ô∏è **–ü—Ä–æ–±–ª–µ–º–∞:** –°–ø–∏—Å–æ–∫ `restrictedPages` –≤ `AuthContext.tsx` –¥–æ–ª–∂–µ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –ë–î.

**–†–µ—à–µ–Ω–∏–µ:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞

```python
@bp.route("/api/auth/restricted-pages", methods=["GET"])
def get_restricted_pages():
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü —Ç—Ä–µ–±—É—é—â–∏—Ö –ø—Ä–∞–≤–∞"""
    sql = """
        SELECT PageKey 
        FROM Users.Pages 
        WHERE RequiresViewPermission = 1
    """
    # ...
    return jsonify({"restricted_pages": ["kpi", "finance", ...]})
```

```tsx
// –í AuthContext –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
useEffect(() => {
  fetch('/api/auth/restricted-pages')
    .then(res => res.json())
    .then(data => setRestrictedPages(data.restricted_pages));
}, []);
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –î–æ–±–∞–≤–∏—Ç—å –≤ –æ—Ç–≤–µ—Ç /login

```python
@bp.route("/api/auth/login", methods=["POST"])
def login():
    # ...
    return jsonify({
        "user": {...},
        "permissions": [...],
        "restricted_pages": ["kpi", "finance", ...]  # ‚Üê –¥–æ–±–∞–≤–∏—Ç—å
    })
```

---

### 2. –¢–∏–ø–∏–∑–∞—Ü–∏—è permissions –Ω–∞ Frontend

**–°–æ–∑–¥–∞—Ç—å TypeScript —Ç–∏–ø—ã:**

```tsx
// src/types/permissions.ts

export type PageKey = 'kpi' | 'finance' | 'production' | 'orders' | ...;

export type PermissionType = 'view' | 'edit';

export interface Permission {
  page_key: PageKey;
  can_view: boolean;
  can_edit: boolean;
}

export interface User {
  user_id: number;
  username: string;
  full_name: string;
  email: string | null;
  is_admin: boolean;
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ AuthContext:**

```tsx
import { User, Permission, PageKey, PermissionType } from '../types/permissions';

interface AuthContextType {
  user: User | null;
  permissions: Permission[];
  hasPermission: (pageKey: PageKey, permissionType?: PermissionType) => boolean;
  // ...
}
```

---

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–∞–≤

**Backend:** –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –∏ –æ—Ç–∫–∞–∑—ã.

```python
def check_page_permission(user_id, page_key, permission_type='view'):
    result = ...  # –ø—Ä–æ–≤–µ—Ä–∫–∞
    
    # –õ–æ–≥–∏—Ä—É–µ–º
    log_permission_check(
        user_id=user_id,
        page_key=page_key,
        permission_type=permission_type,
        result=result,
        timestamp=datetime.now()
    )
    
    return result
```

**–¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –ª–æ–≥–æ–≤:**

```sql
CREATE TABLE Users.PermissionLogs (
    LogID INT IDENTITY(1,1) PRIMARY KEY,
    UserID INT,
    PageKey NVARCHAR(50),
    PermissionType NVARCHAR(10),
    Result BIT,
    CheckedAt DATETIME DEFAULT GETDATE()
);
```

---

### 4. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤

**Frontend:** –ö–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã `hasPermission()` —á—Ç–æ–±—ã –Ω–µ –≤—ã—á–∏—Å–ª—è—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑.

```tsx
const [permissionCache, setPermissionCache] = useState<Map<string, boolean>>(new Map());

const hasPermission = useCallback((pageKey: string, permissionType: 'view' | 'edit' = 'view'): boolean => {
  const cacheKey = `${pageKey}:${permissionType}`;
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–µ—à
  if (permissionCache.has(cacheKey)) {
    return permissionCache.get(cacheKey)!;
  }
  
  // –í—ã—á–∏—Å–ª—è–µ–º
  const result = ... // –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∫–µ—à
  setPermissionCache(prev => new Map(prev).set(cacheKey, result));
  
  return result;
}, [user, permissions, permissionCache]);
```

---

### 5. Unit —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

**Backend (Python):**

```python
# tests/test_permissions.py

def test_admin_has_all_permissions():
    """–ê–¥–º–∏–Ω –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∞"""
    result = check_page_permission(
        user_id=1,  # admin
        page_key='kpi',
        permission_type='view'
    )
    assert result == True

def test_user_without_permission_denied():
    """–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ –ø—Ä–∞–≤–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Å–∫—Ä—ã—Ç—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É"""
    result = check_page_permission(
        user_id=4,  # Aikerim –±–µ–∑ –ø—Ä–∞–≤ –Ω–∞ kpi
        page_key='kpi',
        permission_type='view'
    )
    assert result == False
```

**Frontend (TypeScript):**

```tsx
// __tests__/hasPermission.test.ts

import { renderHook } from '@testing-library/react-hooks';
import { useAuth } from '../context/AuthContext';

test('admin has all permissions', () => {
  const { result } = renderHook(() => useAuth(), {
    wrapper: ({ children }) => (
      <AuthProvider initialUser={{ is_admin: true, ... }}>
        {children}
      </AuthProvider>
    )
  });
  
  expect(result.current.hasPermission('kpi', 'view')).toBe(true);
});
```

---

## üîê –°–ò–°–¢–ï–ú–ê –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò –ß–ï–†–ï–ó –°–ö–£–î

### –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Å–∏—Å—Ç–µ–º–æ–π –°–ö–£–î (–∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞).

**–ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:**
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏–∑ –°–ö–£–î –º–æ–≥—É—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –î–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ `empcode` –∏–∑ –°–ö–£–î
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç –§–ò–û –∏–∑ –°–ö–£–î
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å–≤–æ–π `username` –∏ `password`

---

### Backend —Å–µ—Ä–≤–∏—Å

**–§–∞–π–ª:** `Back/Users/service/skud_service.py`

```python
def check_empcode_in_skud(empcode: str):
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ empcode –≤ —Ç–∞–±–ª–∏—Ü–µ Import_SKUD.empinfo
    
    Returns:
        {
            'exists': True/False,
            'empcode': '3609',
            'empname': 'KAGIROV UMAR',
            'isactive': True
        }
    """
    
def get_employee_info(empcode: str):
    """
    –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–µ –∏–∑ –°–ö–£–î
    –í—Å–µ –ø–æ–ª—è: empcode, empname, birthday, age, deptname2-5, etc.
    """
```

---

### API Endpoints –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**1. POST `/api/auth/check-empcode`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ empcode

**Request:**
```json
{
  "empcode": "3609"
}
```

**Response (–Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω):**
```json
{
  "success": true,
  "exists_in_users": false,
  "exists_in_skud": true,
  "employee_data": {
    "empcode": "3609",
    "empname": "KAGIROV UMAR",
    "isactive": true
  }
}
```

**Response (—É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω):**
```json
{
  "success": true,
  "exists_in_users": true,
  "exists_in_skud": false,
  "message": "User already registered. Please login with your password."
}
```

---

**2. POST `/api/auth/check-username`** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ username

**Request:**
```json
{
  "username": "kagirov"
}
```

**Response:**
```json
{
  "success": true,
  "available": true
}
```

---

**3. POST `/api/auth/register`** - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Request:**
```json
{
  "empcode": "3609",
  "username": "kagirov",
  "password": "mypassword123",
  "email": "umar@company.com"
}
```

**Response:**
```json
{
  "success": true,
  "token": "eyJ0eXAi...",
  "user": {
    "user_id": 106,
    "username": "kagirov",
    "empcode": "3609",
    "full_name": "KAGIROV UMAR",
    "email": "umar@company.com",
    "is_admin": false
  },
  "permissions": []
}
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- `empcode` –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ Import_SKUD.empinfo
- `empcode` –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞–∫—Ç–∏–≤–µ–Ω (isactive=1)
- `username` —É–Ω–∏–∫–∞–ª—å–Ω—ã–π (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode)
- `password` –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤
- `email` –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

### –õ–æ–≥–∏–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—à–∞–≥ –∑–∞ —à–∞–≥–æ–º)

#### **–®–∞–≥ 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç empcode + "123"**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ /login
  ‚Üì
Login: 3609
Password: 123
  ‚Üì
–ù–∞–∂–∏–º–∞–µ—Ç "Login"
```

#### **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Users.Users**

```python
# Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /api/auth/login
verify_login(login='3609', password='123')

# SQL: 
SELECT * FROM Users.Users 
WHERE (Username = '3609' OR empcode = '3609') AND Password = '123'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: –ù–ï –Ω–∞–π–¥–µ–Ω–æ
```

#### **–®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ empcode –≤ –°–ö–£–î**

```python
# Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /api/auth/check-empcode
check_empcode_in_skud('3609')

# SQL:
SELECT empcode, empname, isactive 
FROM Import_SKUD.empinfo 
WHERE empcode = '3609'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: 
# empcode='3609', empname='KAGIROV UMAR', isactive=1
```

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
```python
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Users.Users (–ø–æ empcode)
cursor.execute("SELECT * FROM Users.Users WHERE empcode = ?", (empcode,))
if found:
    return "User already registered"  # ‚Üê –ó–ê–©–ò–¢–ê –û–¢ –î–£–ë–õ–ò–†–û–í–ê–ù–ò–Ø

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –°–ö–£–î
if empcode not in SKUD:
    return "Employee code not found in SKUD"

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
if not isactive:
    return "Employee is not active"
```

#### **–®–∞–≥ 4: –ü–æ–∫–∞–∑ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**

Frontend –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Registration                  ‚úï    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Employee Information from SKUD:    ‚îÇ
‚îÇ Code: 3609                         ‚îÇ
‚îÇ Name: KAGIROV UMAR                 ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Avatar (optional)                  ‚îÇ
‚îÇ        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ        ‚îÇ  üì∏   ‚îÇ  ‚Üê Click to upload‚îÇ
‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ PNG, JPG, GIF, WEBP (max 5MB)      ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Username * (–º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞, ‰∏≠Êñá)‚îÇ
‚îÇ [kagirov    ] ‚úÖ Available         ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Password * (–º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤)    ‚îÇ
‚îÇ [‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢     ] ‚úÖ –ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Confirm Password *                 ‚îÇ
‚îÇ [‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢     ]                      ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)                ‚îÇ
‚îÇ [umar@company.com]                 ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ         [Cancel]  [Register]       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **–®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)**

–ü—Ä–∏ –≤–≤–æ–¥–µ username —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 500–º—Å:

```javascript
// Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /api/auth/check-username
fetch('/api/auth/check-username', {
  body: JSON.stringify({ username: 'kagirov' })
})

// Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
SELECT UserID FROM Users.Users WHERE Username = 'kagirov'

// –ï—Å–ª–∏ –ù–ï –Ω–∞–π–¥–µ–Ω–æ:
‚úÖ Username available

// –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ:
‚ùå Username already taken
```

#### **–®–∞–≥ 6: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

```python
# Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /api/auth/register

# Backend –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
INSERT INTO Users.Users 
(Username, empcode, Password, FullName, Email, IsAdmin, IsActive, CreatedAt)
VALUES ('kagirov', '3609', 'mypassword', 'KAGIROV UMAR', 'umar@company.com', 0, 1, GETDATE())

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
INSERT INTO Users.AuditLog (UserID, ActionType) VALUES (106, 'register')
INSERT INTO Users.AuditLog (UserID, ActionType) VALUES (106, 'login')

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–∞
token = generate_jwt_token(user_data)
```

#### **–®–∞–≥ 7: –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω)**

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª –∞–≤–∞—Ç–∞—Ä –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```python
# Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç /api/users/avatar (—Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º token)
POST /api/users/avatar
Headers: Authorization: Bearer {token_from_registration}
Body: FormData —Å —Ñ–∞–π–ª–æ–º –∞–≤–∞—Ç–∞—Ä–∞

# Backend:
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ (PNG/JPG/GIF/WEBP)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–æ 200x200
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∫ /dist/avatar_{user_id}.png
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –∞–≤–∞—Ç–∞—Ä–∞ (–µ—Å–ª–∏ –±—ã–ª)
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è –∞–≤–∞—Ç–∞—Ä–∞:**
- –§–æ—Ä–º–∞—Ç—ã: PNG, JPG, JPEG, GIF, WEBP
- –†–∞–∑–º–µ—Ä: –º–∞–∫—Å–∏–º—É–º 5MB
- –û–±—Ä–∞–±–æ—Ç–∫–∞: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –¥–æ 200x200px
- –§–æ—Ä–º–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: PNG

#### **–®–∞–≥ 8: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
```
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
  ‚Üì
–ê–≤–∞—Ç–∞—Ä –∑–∞–≥—Ä—É–∂–µ–Ω (–µ—Å–ª–∏ –±—ã–ª –≤—ã–±—Ä–∞–Ω)
  ‚Üì
–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è
  ‚Üì
–ó–µ–ª–µ–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "Registration successful! Welcome, kagirov"
  ‚Üì
–ü–æ–ª–µ Login –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ: kagirov
  ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ–π –ø–∞—Ä–æ–ª—å –∏ –ª–æ–≥–∏–Ω–∏—Ç—Å—è
```

---

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ **–¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:**

#### **–í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ empcode**
```
Login: 3609
Password: mypassword
  ‚Üì
SQL: WHERE (Username = '3609' OR empcode = '3609') AND Password = 'mypassword'
  ‚Üì
–í—Ö–æ–¥ ‚úÖ
```

#### **–í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ username**
```
Login: kagirov
Password: mypassword
  ‚Üì
SQL: WHERE (Username = 'kagirov' OR empcode = 'kagirov') AND Password = 'mypassword'
  ‚Üì
–í—Ö–æ–¥ ‚úÖ
```

---

### –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–Ω–æ–≤–∞ —Å empcode + "123"

```
Login: 3609
Password: 123
  ‚Üì
verify_login() ‚Üí –ù–ï –Ω–∞–π–¥–µ–Ω–æ (–ø–∞—Ä–æ–ª—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
  ‚Üì
check_empcode() ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ Users.Users WHERE empcode = '3609'
  ‚Üì
‚úÖ –ù–ê–ô–î–ï–ù–û! (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
  ‚Üì
‚ùå –û—à–∏–±–∫–∞: "This employee code is already registered. 
             Please use your own password."
  ‚Üì
–û–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

---

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –¥–∞–Ω–Ω—ã–º

| –ü–æ–ª–µ | –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π |
|------|-----------|---------------------------|
| `empcode` | –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –°–ö–£–î, isactive=1 | "01", "3609", "1234" |
| `username` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π, ‚â•2 —Å–∏–º–≤–æ–ª–∞, Unicode | "kagirov", "ÊùéÊòé", "–ª–∏", "ai" |
| `password` | ‚â•6 —Å–∏–º–≤–æ–ª–æ–≤ | "qwerty123", "ÂØÜÁ†Å12345" |
| `email` | Email —Ñ–æ—Ä–º–∞—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | "user@company.com" |
| `avatar` | PNG/JPG/GIF/WEBP, –º–∞–∫—Å 5MB (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | photo.jpg, avatar.png |

---

### –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```sql
SELECT UserID, Username, empcode, FullName FROM Users.Users;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç:
UserID | Username | empcode | FullName
-------|----------|---------|------------------
1      | admin    | NULL    | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã
2      | GM       | NULL    | GM User
106    | kagirov  | 3609    | KAGIROV UMAR      ‚Üê –ò–∑ –°–ö–£–î
107    | ÊùéÊòé     | 1234    | ÊùéÊòé              ‚Üê –ö–∏—Ç–∞–π—Å–∫–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
108    | ivan     | 5678    | –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω       ‚Üê –†—É—Å—Å–∫–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
```

---

## üìä –°–ò–°–¢–ï–ú–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø –ò –°–¢–ê–¢–ò–°–¢–ò–ö–ò

### –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É–¥–∏—Ç–∞ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

---

### –ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

| ActionType | –ö–æ–≥–¥–∞ | –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π |
|------------|-------|------------------|
| `login` | –í—Ö–æ–¥ —Å –ø–∞—Ä–æ–ª–µ–º | –ù–µ—Ç |
| `session_start` | –û—Ç–∫—Ä—ã—Ç–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º | < 30 —Å–µ–∫—É–Ω–¥ |
| `logout` | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã | –ù–µ—Ç |
| `page_view` | –ü–æ—Å–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | < 30 —Å–µ–∫ –¥–ª—è –æ–¥–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã |

---

### Backend API –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `Back/Users/service/audit_service.py`

```python
def log_action(user_id, action_type, page_key=None, ip_address=None):
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
    """
    
def get_system_statistics():
    """
    –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
    - –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
    - –ê–∫—Ç–∏–≤–Ω—ã—Ö/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö
    - –ù–æ–≤—ã—Ö –∑–∞ 7 –¥–Ω–µ–π
    - –û–Ω–ª–∞–π–Ω —Å–µ–≥–æ–¥–Ω—è
    - –¢–æ–ø-5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    """
    
def get_user_statistics(user_id):
    """
    –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
    - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–æ–≤
    - –ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥
    - –°–∞–º–∞—è –ø–æ—Å–µ—â–∞–µ–º–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    - –í—Å–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–π
    """
```

**API Endpoints:**

```python
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
POST /api/auth/session-start       # –ù–∞—á–∞–ª–æ —Å–µ—Å—Å–∏–∏
POST /api/auth/log-page-view        # –ü–æ—Å–µ—â–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET /api/admin/statistics           # –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
GET /api/admin/users/{id}/statistics # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET /api/admin/users/{id}/activity   # –õ–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

---

### Frontend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**AuthContext (`Front/src/context/AuthContext.tsx`):**
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–æ–∫–µ–Ω–æ–º ‚Üí `session_start`
- –ü—Ä–∏ logout ‚Üí `logout`

**usePageView (`Front/src/hooks/usePageView.ts`):**
–•—É–∫ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–µ—â–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:
const Production = () => {
  usePageView('production');
  // ...
};
```

**–°—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
- `home` - –ì–ª–∞–≤–Ω–∞—è
- `plan` - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ  
- `production` - –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
- `orders` - –ó–∞–∫–∞–∑—ã
- `admin` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ
- `profile` - –ü—Ä–æ—Ñ–∏–ª—å
- `kpi` - KPI (—á–µ—Ä–µ–∑ RequirePermission)

---

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–í–∫–ª–∞–¥–∫–∞ "Statistics" –≤ `/admin`:**

**1. –ü–∞–Ω–µ–ª—å –º–µ—Ç—Ä–∏–∫ (6 –∫–∞—Ä—Ç–æ—á–µ–∫):**
- Total Users
- Administrators  
- Active
- Inactive
- New (7 days)
- Online Today

**2. Most Active Users (Last 7 Days):**
–¢–∞–±–ª–∏—Ü–∞ —Ç–æ–ø-5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞–º–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**3. Most Popular Pages (Last 30 Days):**
–ì—Ä–∞—Ñ–∏–∫ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π

**4. All Users Activity:**
–î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
- Username
- Full Name
- Status (Active/Inactive)
- Role (Admin/User)
- Last Login (—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –æ–Ω–ª–∞–π–Ω üü¢)
- Total Logins

---

### –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
```
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã
@admin ‚Ä¢ Last login: 13.10.2025 14:30 ‚Ä¢ 52 logins
```

---

## üéì –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤:
‚úÖ JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å —Ç–æ–∫–µ–Ω–∞–º–∏ (24 —á–∞—Å–∞)  
‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ (–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–∫—Ä—ã—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü)  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ Frontend –∏ Backend  
‚úÖ –†–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (IsAdmin)  
‚úÖ –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —á–µ—Ä–µ–∑ RequirePermission  

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è (/profile)  
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –∏ –ø–∞—Ä–æ–ª—è  
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ (PNG/JPG/GIF/WEBP ‚Üí PNG 200x200, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö)  
‚úÖ –ê–¥–º–∏–Ω–∫–∞ (/admin) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏  
‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ/—Å–Ω—è—Ç–∏–µ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  
‚úÖ –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)  
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–±—è –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞–¥–º–∏–Ω–∞)  
‚úÖ –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ Username  
‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–∞–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞–º–∏  
‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ –°–ö–£–î:
‚úÖ –¢–∞–±–ª–∏—Ü–∞ Import_SKUD.empinfo —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –ë–î  
‚úÖ –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ empcode  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –§–ò–û –∏–∑ –°–ö–£–î  
‚úÖ –í—Ö–æ–¥ –ø–æ empcode –ò–õ–ò username  
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  
‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è: username ‚â•2 —Å–∏–º–≤–æ–ª–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ ‰∏≠Êñá), password ‚â•6 —Å–∏–º–≤–æ–ª–æ–≤  
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ empcode  
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
‚úÖ Preview –∞–≤–∞—Ç–∞—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏  

#### –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤:
‚úÖ –¢–∞–±–ª–∏—Ü–∞ Users.UserReports (SelectedFields, Filters, Grouping)  
‚úÖ Backend API: `/api/orders/reports/*` (CRUD, execute)  
‚úÖ Report Manager - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞–º–∏  
‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (–≤–∏–¥—è—Ç –≤—Å–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç –∞–¥–º–∏–Ω—ã/—Ç–µ —É –∫–æ–≥–æ –µ—Å—Ç—å –ø—Ä–∞–≤–æ)  
‚úÖ –õ–∏—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (–≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å)  
‚úÖ –í—ã–±–æ—Ä –ø–æ–ª–µ–π —Å drag and drop —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π  
‚úÖ –§–∏–ª—å—Ç—Ä—ã (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–æ–ª—è, 12 –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤)  
‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ (GROUP BY + SUM/COUNT/AVG/MIN/MAX)  
‚úÖ AG Grid —Ç–∞–±–ª–∏—Ü–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è 10,000+ —Å—Ç—Ä–æ–∫  
‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ (Ctrl+C) —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –¥–ª—è Excel  

#### –¢–µ–∫—É—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø—Ä–∞–≤–∞–º–∏:
‚úÖ **kpi** - —Å–∫—Ä—ã—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (RequiresViewPermission=1)  
‚úÖ **orders_orderlog_edit** - –ø—Ä–∞–≤–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (RequiresEditPermission=1)  
‚úÖ **production_working_calendar_edit** - —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Ä–∞–±–æ—Ç—ã (RequiresEditPermission=1)  
‚úÖ **production_timeloss_edit** - –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ Time Loss (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π, —É–¥–∞–ª–µ–Ω–∏–µ)  
‚úÖ **production_timeloss_limited_edit** - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ Time Loss (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ ActionPlan, Responsible, CompletedDate)

#### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚úÖ –¢–∞–±–ª–∏—Ü–∞ Users.AuditLog –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: login, logout, session_start, page_view  
‚úÖ Backend —Å–µ—Ä–≤–∏—Å audit_service.py —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏  
‚úÖ API endpoints –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏  
‚úÖ –í–∫–ª–∞–¥–∫–∞ "Statistics" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏  
‚úÖ –ü–∞–Ω–µ–ª—å –º–µ—Ç—Ä–∏–∫ (6 –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏)  
‚úÖ –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ 7 –¥–Ω–µ–π  
‚úÖ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞ 30 –¥–Ω–µ–π  
‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π (30 —Å–µ–∫—É–Ω–¥)

---

### üîú –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –±—É–¥—É—â–µ–º:

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
üîú –ó–∞—â–∏—Ç–∞ –≤—Å–µ—Ö Backend API —á–µ—Ä–µ–∑ middleware `@require_auth`  
üîú –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt) –≤–º–µ—Å—Ç–æ plain text  
üîú –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Users.AuditLog)  
üîú 2FA (–¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)  

#### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–∞–≤:
üîú –ß–∞—Å—Ç–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ—Ö–∞–º/–æ—Ç–¥–µ–ª–∞–º/—Ä—ã–Ω–∫–∞–º)  
üîú –ü—Ä–∞–≤–∞ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (add/edit/delete –æ—Ç–¥–µ–ª—å–Ω–æ)  
üîú –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ (—Å –¥–∞—Ç–æ–π –∏—Å—Ç–µ—á–µ–Ω–∏—è)  
üîú –†–æ–ª–∏ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ (–≤–º–µ—Å—Ç–æ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ø—Ä–∞–≤)  

#### –û—Ç—á–µ—Ç—ã:
üîú –†–∞—Å—à–∞—Ä–∏–≤–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
üîú Scheduled reports (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ email)  
üîú –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ –≤ PDF  
üîú –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ –æ—Ç—á–µ—Ç–∞—Ö  

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
üîú Unit —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤  
üîú Integration —Ç–µ—Å—Ç—ã –¥–ª—è API  
üîú E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤  

---

### üìù –ü—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏:

1. **–ù–µ –ª–æ–º–∞–π—Ç–µ —Ç–µ–∫—É—â—É—é –ª–æ–≥–∏–∫—É** - –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è/—Ç–∞–±–ª–∏—Ü—ã, –Ω–µ –º–µ–Ω—è–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ Frontend –∏ Backend** - —Å–ø–∏—Å–æ–∫ `restrictedPages` –≤ AuthContext –¥–æ–ª–∂–µ–Ω –±—Ä–∞—Ç—å—Å—è –∏–∑ API
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ** - –¥–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –ø—Ä–∞–≤
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ** - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** - –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å first** - –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ Backend, Frontend –ø—Ä–æ–≤–µ—Ä–∫–∞ - —Ç–æ–ª—å–∫–æ –¥–ª—è UX

---

## üìä –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- 5 —Ç–∞–±–ª–∏—Ü –≤ —Å—Ö–µ–º–µ Users + 1 —Ç–∞–±–ª–∏—Ü–∞ Import_SKUD ‚úÖ
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ –°–ö–£–î –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚úÖ
- 105+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏) ‚úÖ
- 5 —Å—Ç—Ä–∞–Ω–∏—Ü —Å –ø—Ä–∞–≤–∞–º–∏ ‚úÖ

### Backend API:
- 35+ endpoints ‚úÖ
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (login, register, check-empcode, check-username) ‚úÖ
- –ü—Ä–æ—Ñ–∏–ª—å, –∞–¥–º–∏–Ω–∫–∞, –æ—Ç—á–µ—Ç—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ‚úÖ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π (login, logout, session_start, page_view, register) ‚úÖ
- –°–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ –°–ö–£–î (skud_service.py) ‚úÖ

### Frontend:
- 10+ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ ‚úÖ
- AuthContext, RequirePermission, usePageView ‚úÖ
- Report Manager (920 —Å—Ç—Ä–æ–∫) ‚úÖ
- AdminPage —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ Users & Statistics ‚úÖ
- LoginForm —Å –º–æ–¥–∞–ª—å–Ω—ã–º –æ–∫–Ω–æ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚úÖ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ ‚úÖ
- –ü–µ—Ä–µ–≤–æ–¥—ã (en/zh/ru) ‚úÖ

### Production –ø—Ä–∞–≤–∞:
- Working Calendar - –ø–æ–ª–Ω–∞—è –∑–∞—â–∏—Ç–∞ ‚úÖ
- Time Loss - 3 —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞ (Viewer, Limited, Full) ‚úÖ
- Daily Plan-Fact - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä ‚úÖ
- Order Tails - —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä ‚úÖ

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ –°–ö–£–î:
- –¢–∞–±–ª–∏—Ü–∞ Import_SKUD.empinfo —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ ‚úÖ
- –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ empcode ‚úÖ
- –í—Ö–æ–¥ –ø–æ empcode –ò–õ–ò username ‚úÖ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode/‰∏≠Êñá –≤ username (‚â•2 —Å–∏–º–≤–æ–ª–∞) ‚úÖ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (‚â•6 —Å–∏–º–≤–æ–ª–æ–≤) ‚úÖ

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-13 (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 3.1 - HR System Integration, Self-Registration, Complete User Management  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ  

---

## üìä –°–ò–°–¢–ï–ú–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–• –û–¢–ß–ï–¢–û–í

### –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –∏–∑ VIEW `Orders.Orders_1C_Svod` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
- –í—ã–±–æ—Ä–∞ –ø–æ–ª–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫ —Å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ vs –ª–∏—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã)

---

### –¢–∞–±–ª–∏—Ü–∞ `Users.UserReports`

```sql
CREATE TABLE Users.UserReports (
    ReportID INT IDENTITY(1,1) PRIMARY KEY,
    UserID INT NOT NULL,
    ReportName NVARCHAR(100) NOT NULL,
    SourceTable NVARCHAR(100) NOT NULL,     -- 'Orders.Orders_1C_Svod'
    SelectedFields NVARCHAR(MAX),           -- JSON: ["Order_No", "Market", ...]
    Filters NVARCHAR(MAX),                  -- JSON: [{field, operator, value}, ...]
    Grouping NVARCHAR(MAX),                 -- JSON: {group_by: [...], aggregates: [...]}
    IsTemplate BIT DEFAULT 0,               -- 1 = —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (–≤–∏–¥—è—Ç –≤—Å–µ)
    IsEditable BIT DEFAULT 1,               -- 1 = –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
    CreatedAt DATETIME DEFAULT GETDATE(),
    UpdatedAt DATETIME,
    FOREIGN KEY (UserID) REFERENCES Users.Users(UserID) ON DELETE CASCADE
);
```

---

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–∞

#### –ü—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞ –≤ –ë–î:

```json
{
  "ReportID": 5,
  "ReportName": "Russia Orders > 1000",
  "SourceTable": "Orders.Orders_1C_Svod",
  "SelectedFields": ["Order_No", "Market", "Total_Order_QTY", "LargeGroup"],
  "Filters": [
    {"field": "Market", "operator": "equals", "value": "Russia"},
    {"field": "Total_Order_QTY", "operator": "greater_than", "value": "1000"}
  ],
  "Grouping": {
    "group_by": ["Market", "LargeGroup"],
    "aggregates": [
      {"field": "Total_Order_QTY", "function": "SUM", "alias": "Total_QTY"},
      {"field": "*", "function": "COUNT", "alias": "Order_Count"}
    ]
  }
}
```

#### SQL –∑–∞–ø—Ä–æ—Å –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:

```sql
SELECT 
    [Market], 
    [LargeGroup],
    SUM([Total_Order_QTY]) AS [Total_QTY],
    COUNT(*) AS [Order_Count]
FROM Orders.Orders_1C_Svod
WHERE [Market] = N'Russia'
  AND [Total_Order_QTY] > 1000
GROUP BY [Market], [LargeGroup]
```

---

### –û–ø–µ—Ä–∞—Ç–æ—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

| –û–ø–µ—Ä–∞—Ç–æ—Ä | SQL | –ü—Ä–∏–º–µ—Ä |
|----------|-----|--------|
| `equals` | `=` | Market = "China" |
| `not_equals` | `!=` | Market != "China" |
| `greater_than` | `>` | Total_Order_QTY > 100 |
| `less_than` | `<` | Total_Order_QTY < 1000 |
| `greater_or_equal` | `>=` | Total_Order_QTY >= 100 |
| `less_or_equal` | `<=` | Total_Order_QTY <= 1000 |
| `contains` | `LIKE '%value%'` | Order_No —Å–æ–¥–µ—Ä–∂–∏—Ç "IZTT" |
| `not_contains` | `NOT LIKE '%value%'` | Order_No –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç "R2360" |
| `starts_with` | `LIKE 'value%'` | Order_No –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "CSA-" |
| `ends_with` | `LIKE '%value'` | Order_No –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ "ËØï‰∫ßÂçï" |
| `is_null` | `IS NULL` | Comment –ø—É—Å—Ç–æ |
| `is_not_null` | `IS NOT NULL` | Comment –Ω–µ –ø—É—Å—Ç–æ |

---

### –ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `SUM` | –°—É–º–º–∞ –∑–Ω–∞—á–µ–Ω–∏–π | SUM(Total_Order_QTY) AS Total_Quantity |
| `COUNT` | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ | COUNT(*) AS Order_Count |
| `AVG` | –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | AVG(Total_Order_QTY) AS Avg_Quantity |
| `MIN` | –ú–∏–Ω–∏–º—É–º | MIN(Total_Order_QTY) AS Min_Quantity |
| `MAX` | –ú–∞–∫—Å–∏–º—É–º | MAX(Total_Order_QTY) AS Max_Quantity |

---

### Backend API –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤

**–ë–∞–∑–æ–≤—ã–π URL:** `/api/orders/reports/`

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| GET | `/list` | –°–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ + –ª–∏—á–Ω—ã–µ) |
| POST | `/create` | –°–æ–∑–¥–∞—Ç—å –ª–∏—á–Ω—ã–π –æ—Ç—á–µ—Ç |
| GET | `/{id}` | –ü–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω –æ—Ç—á–µ—Ç |
| PUT | `/{id}` | –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç—á–µ—Ç |
| DELETE | `/{id}` | –£–¥–∞–ª–∏—Ç—å –æ—Ç—á–µ—Ç |
| POST | `/{id}/execute` | –í—ã–ø–æ–ª–Ω–∏—Ç—å –æ—Ç—á–µ—Ç (–ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ) |
| GET | `/fields` | –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–ª–µ–π –∏–∑ VIEW |

---

### Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### Report Manager (`ReportManager.tsx`)
–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—á–µ—Ç–∞–º–∏ —Å 3 –≤–∫–ª–∞–¥–∫–∞–º–∏:
- **üìã Fields** - –≤—ã–±–æ—Ä –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π (drag and drop)
- **üîç Filters** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- **üìä Grouping** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫ –∏ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤

#### OrdersLogTable (`OrdersLogTable.tsx`)
AG Grid —Ç–∞–±–ª–∏—Ü–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏:
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥ (10,000+ —Å—Ç—Ä–æ–∫)
- –í—ã–¥–µ–ª–µ–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Excel (Ctrl+C)
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª (—Å –ø—Ä–æ–±–µ–ª–æ–º –≤–∏–∑—É–∞–ª—å–Ω–æ, –±–µ–∑ –ø—Ä–æ–±–µ–ª–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏)
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç (DD.MM.YYYY)
- Status Bar —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π (Sum, Avg, Count)

---

### –õ–æ–≥–∏–∫–∞ –ø—Ä–∞–≤ –Ω–∞ –æ—Ç—á–µ—Ç—ã

#### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (IsTemplate=1):
- **–ü—Ä–æ—Å–º–æ—Ç—Ä:** –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ ‚úÖ
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 
  - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (IsAdmin=1) ‚úÖ
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –ø—Ä–∞–≤–æ–º `orders_orderlog_edit` (CanEdit=1) ‚úÖ
- **–£–¥–∞–ª–µ–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã ‚úÖ

#### –õ–∏—á–Ω—ã–µ –æ—Ç—á–µ—Ç—ã (IsTemplate=0):
- **–ü—Ä–æ—Å–º–æ—Ç—Ä:** –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å ‚úÖ
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å ‚úÖ
- **–£–¥–∞–ª–µ–Ω–∏–µ:** –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å ‚úÖ

---

### –ü—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤

#### –ü—Ä–∏–º–µ—Ä 1: –ü—Ä–æ—Å—Ç–æ–π –æ—Ç—á–µ—Ç

**–ó–∞–¥–∞—á–∞:** –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã –¥–ª—è –†–æ—Å—Å–∏–∏

```json
{
  "report_name": "Russia Orders",
  "selected_fields": ["Order_No", "Market", "Total_Order_QTY"],
  "filters": [
    {"field": "Market", "operator": "equals", "value": "Russia"}
  ],
  "grouping": null
}
```

**SQL:**
```sql
SELECT [Order_No], [Market], [Total_Order_QTY]
FROM Orders.Orders_1C_Svod
WHERE [Market] = N'Russia'
```

---

#### –ü—Ä–∏–º–µ—Ä 2: –û—Ç—á–µ—Ç —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π

**–ó–∞–¥–∞—á–∞:** –°—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ –≥—Ä—É–ø–ø–∞–º –ø—Ä–æ–¥—É–∫—Ü–∏–∏ –¥–ª—è –†–æ—Å—Å–∏–∏

```json
{
  "report_name": "Russia by Product Group",
  "selected_fields": ["LargeGroup", "Total_Order_QTY"],
  "filters": [
    {"field": "Market", "operator": "equals", "value": "Russia"}
  ],
  "grouping": {
    "group_by": ["LargeGroup"],
    "aggregates": [
      {"field": "Total_Order_QTY", "function": "SUM", "alias": "Total_QTY"},
      {"field": "*", "function": "COUNT", "alias": "Order_Count"}
    ]
  }
}
```

**SQL:**
```sql
SELECT 
    [LargeGroup],
    SUM([Total_Order_QTY]) AS [Total_QTY],
    COUNT(*) AS [Order_Count]
FROM Orders.Orders_1C_Svod
WHERE [Market] = N'Russia'
GROUP BY [LargeGroup]
```

---

#### –ü—Ä–∏–º–µ—Ä 3: –°–ª–æ–∂–Ω—ã–π –æ—Ç—á–µ—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

**–ó–∞–¥–∞—á–∞:** –ó–∞–∫–∞–∑—ã IZTT –Ω–æ –Ω–µ R2360, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ > 100

```json
{
  "report_name": "IZTT Orders (filtered)",
  "selected_fields": ["Order_No", "Total_Order_QTY", "Market"],
  "filters": [
    {"field": "Order_No", "operator": "contains", "value": "IZTT"},
    {"field": "Order_No", "operator": "not_contains", "value": "R2360"},
    {"field": "Total_Order_QTY", "operator": "greater_than", "value": "100"}
  ],
  "grouping": null
}
```

**SQL:**
```sql
SELECT [Order_No], [Total_Order_QTY], [Market]
FROM Orders.Orders_1C_Svod
WHERE [Order_No] LIKE N'%IZTT%'
  AND [Order_No] NOT LIKE N'%R2360%'
  AND [Total_Order_QTY] > 100
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 2025-10-13  
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 3.0 - Production Rights, Audit Log, Statistics Dashboard

## üÜï –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 3.0 (2025-10-13):

### –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ Production:
- ‚úÖ Working Calendar - –∑–∞—â–∏—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- ‚úÖ Time Loss - 3 —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞ (Viewer, Limited, Full)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –∫–Ω–æ–ø–æ–∫ –∏ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—É–¥–∏—Ç:
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ Users.AuditLog –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: login, logout, session_start, page_view
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è (30 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ IP –∞–¥—Ä–µ—Å–∞ –∏ User Agent

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- ‚úÖ –í–∫–ª–∞–¥–∫–∞ Statistics –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ 6 –º–µ—Ç—Ä–∏–∫ (Total, Admins, Active, Inactive, New, Online)
- ‚úÖ –¢–æ–ø –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (7 –¥–Ω–µ–π)
- ‚úÖ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (30 –¥–Ω–µ–π)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä "–æ–Ω–ª–∞–π–Ω —Å–µ–≥–æ–¥–Ω—è" üü¢

### –£–ª—É—á—à–µ–Ω–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
- ‚úÖ –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å 100+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏)
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–∞–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (Production, Orders, KPI)
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (last login, total logins)

---

## üÜï –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 3.1 (2025-10-13):

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ –°–ö–£–î:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `empcode` –≤ Users.Users
- ‚úÖ –°–≤—è–∑—å —Å —Ç–∞–±–ª–∏—Ü–µ–π Import_SKUD.empinfo
- ‚úÖ Backend —Å–µ—Ä–≤–∏—Å skud_service.py –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ –°–ö–£–î
- ‚úÖ –§—É–Ω–∫—Ü–∏—è check_empcode_in_skud() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

### –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ /login
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏–µ –§–ò–û –∏–∑ –°–ö–£–î
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (debounce 500ms)
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ Preview –∞–≤–∞—Ç–∞—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –†—É—á–Ω–æ–π –≤—Ö–æ–¥ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–±–µ–∑ –∞–≤—Ç–æ–ª–æ–≥–∏–Ω–∞)

### API Endpoints:
- ‚úÖ POST /api/auth/check-empcode - –ø—Ä–æ–≤–µ—Ä–∫–∞ empcode –≤ –°–ö–£–î –∏ Users
- ‚úÖ POST /api/auth/check-username - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ username
- ‚úÖ POST /api/auth/register - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ DELETE /api/admin/users/{id} - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –õ–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Ö–æ–¥–∞ –ø–æ empcode –ò–õ–ò username
- ‚úÖ verify_login() –æ–±–Ω–æ–≤–ª–µ–Ω (WHERE Username = ? OR empcode = ?)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ empcode

### –í–∞–ª–∏–¥–∞—Ü–∏—è:
- ‚úÖ Username: –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞ (–±—ã–ª–æ 3)
- ‚úÖ Password: –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤ (–±—ã–ª–æ 3)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode/‰∏≠Êñá –≤ username
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ Frontend –∏ Backend

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
- ‚úÖ –ö–Ω–æ–ø–∫–∞ Delete –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–±—è
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ CASCADE —É–¥–∞–ª–µ–Ω–∏–µ (–ø—Ä–∞–≤–∞, –ª–æ–≥–∏, –æ—Ç—á–µ—Ç—ã)

---

**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 3.1  
**–î–∞—Ç–∞:** 2025-10-13  
**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏:** HR System –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è, —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–µ—Ä—Å–∏–∏ 3.1:

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
- 5 —Ç–∞–±–ª–∏—Ü Users + 1 —Ç–∞–±–ª–∏—Ü–∞ Import_SKUD
- –ü–æ–ª–Ω–∞—è CASCADE —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 105+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**Backend (Python/Flask):**
- 35+ API endpoints
- 4 —Å–µ—Ä–≤–∏—Å–∞ (auth, audit, skud, users)
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (login, logout, session_start, page_view, register)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π (30 —Å–µ–∫—É–Ω–¥)

**Frontend (React/TypeScript):**
- 10+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å (EN/ZH/RU) - 140+ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
- –†–∞–∑–≤–µ—Ä–Ω—É—Ç–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode –≤ username (‰∏≠Êñá, –∫–∏—Ä–∏–ª–ª–∏—Ü–∞)
- ‚úÖ –í—Ö–æ–¥ –ø–æ empcode –ò–õ–ò username
- ‚úÖ –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ HR System
- ‚úÖ 3 —É—Ä–æ–≤–Ω—è –ø—Ä–∞–≤ –¥–ª—è Time Loss
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ Real-time –≤–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL injection (–ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è —Å–µ–±—è/–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∞–¥–º–∏–Ω–∞

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- JWT —Ç–æ–∫–µ–Ω—ã (24 —á–∞—Å–∞)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ Frontend –∏ Backend
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å IP –∞–¥—Ä–µ—Å–∞–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –æ–±–æ–∏—Ö —É—Ä–æ–≤–Ω—è—Ö

---

